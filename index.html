<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AGEUL - Astana Professional Monitoring</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        body, html { margin: 0; padding: 0; height: 100%; background: #000; overflow: hidden; }
        #map { height: 100vh; width: 100%; }
        
        /* –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–∞–Ω–µ–ª—ñ */
        .ui-panel {
            position: absolute; top: 10px; left: 10px; z-index: 1000;
            background: rgba(255, 255, 255, 0.9); padding: 12px; border-radius: 4px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.4); width: 200px;
            border-top: 4px solid #ff0000; font-family: Arial, sans-serif;
        }

        /* –°–µ—Ä–≥–µ–∫ - –ù–∞“õ—Ç—ã “õ—ã–∑—ã–ª –Ω“Ø–∫—Ç–µ */
        .sergek-marker {
            background: #ff0000; border: 1.5px solid #fff; border-radius: 50%;
            box-shadow: 0 0 5px rgba(255,0,0,0.8);
        }

        /* –ê—è–ª–¥–∞–º–∞ - –ö”©–∫ –∫–≤–∞–¥—Ä–∞—Ç */
        .stop-marker {
            background: #0066ff; border: 1px solid #fff; border-radius: 2px;
        }

        /* –ê–≤—Ç–æ–±—É—Å */
        .bus-icon { font-size: 24px; transition: all 1.2s linear; }
    </style>
</head>
<body>

<div class="ui-panel">
    <b style="font-size: 14px;">AGEUL: –ê—Å—Ç–∞–Ω–∞ –ò–ò</b>
    <div style="font-size: 11px; margin-top: 5px;">
        <div>‚Ä¢ –°–µ—Ä–≥–µ–∫—Ç”©—Ä: <span style="color:red;">100+ (–∂–æ–ª–¥–∞)</span></div>
        <div>‚Ä¢ –°—Ç–∞—Ç—É—Å: <span style="color:green;">ACTIVE</span></div>
    </div>
</div>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    // 1. –ê—Å—Ç–∞–Ω–∞ –æ—Ä—Ç–∞–ª—ã“ì—ã (Zoom 14 - –∂–æ–ª–¥–∞—Ä –∂–∞“õ—Å—ã –∫”©—Ä—ñ–Ω—É—ñ “Ø—à—ñ–Ω)
    const map = L.map('map', { zoomControl: false }).setView([51.130, 71.430], 14);

    // 2. –Ø–Ω–¥–µ–∫—Å –ö–∞—Ä—Ç–∞ “õ–∞–±–∞—Ç—ã (–ù–∞“ì—ã–∑ –Ø–Ω–¥–µ–∫—Å —Å—É—Ä–µ—Ç—Ç–µ—Ä—ñ)
    L.tileLayer('https://core-renderer-tiles.maps.yandex.net/tiles?l=map&v=21.01.19-0&x={x}&y={y}&z={z}&scale=1&lang=ru_RU').addTo(map);

    // 3. –°–µ—Ä–≥–µ–∫—Ç—ñ –∂–æ–ª –±–æ–π—ã–Ω–∞ —Ç—ñ–∑—É —Ñ—É–Ω–∫—Ü–∏—è—Å—ã (Random –µ–º–µ—Å, –Ω–∞“õ—Ç—ã —Å—ã–∑—ã“õ–ø–µ–Ω)
    function addSergekRoute(start, end, count) {
        for (let i = 0; i < count; i++) {
            let lat = start[0] + (end[0] - start[0]) * (i / count);
            let lng = start[1] + (end[1] - start[1]) * (i / count);
            L.marker([lat, lng], {
                icon: L.divIcon({ className: 'sergek-marker', iconSize: [9, 9] })
            }).addTo(map);
        }
    }

    // 100 –°–ï–†–ì–ï–ö –¢–Ü–ó–Ü–õ–Ü–ú–Ü:
    // –ú”ô“£–≥—ñ–ª—ñ–∫ –ï–ª –±–æ–π—ã (30 –¥–∞–Ω–∞)
    addSergekRoute([51.127, 71.425], [51.105, 71.485], 30);
    // “ö–∞–±–∞–Ω–±–∞–π –±–∞—Ç—ã—Ä –±–æ–π—ã (25 –¥–∞–Ω–∞)
    addSergekRoute([51.143, 71.405], [51.120, 71.465], 25);
    // –¢“±—Ä–∞–Ω –¥–∞“£“ì—ã–ª—ã (25 –¥–∞–Ω–∞)
    addSergekRoute([51.150, 71.410], [51.135, 71.455], 25);
    // –°–∞—Ä—ã–∞—Ä“õ–∞ / –†–µ—Å–ø—É–±–ª–∏–∫–∞ (20 –¥–∞–Ω–∞)
    addSergekRoute([51.165, 71.425], [51.145, 71.440], 20);

    // 4. –ê–Ø–õ–î–ê–ú–ê–õ–ê–† (–ñ–æ–ª –±–æ–π—ã–Ω–¥–∞“ì—ã –∫”©–∫ –Ω“Ø–∫—Ç–µ–ª–µ—Ä)
    const busStops = [
        [51.138, 71.417], [51.135, 71.429], [51.132, 71.442], [51.129, 71.454],
        [51.144, 71.412], [51.141, 71.424], [51.138, 71.437], [51.135, 71.449]
    ];
    busStops.forEach(pos => {
        L.marker(pos, { icon: L.divIcon({ className: 'stop-marker', iconSize: [7, 7] }) }).addTo(map);
    });

    // 5. –ê–í–¢–û–ë–£–°–¢–ê–† (–¢–µ–∫ –∂–æ–ª–º–µ–Ω –∂“Ø—Ä–µ–¥—ñ)
    function runBus(path, emoji) {
        const marker = L.marker(path[0], { 
            icon: L.divIcon({ html: emoji, className: 'bus-icon', iconSize: [30, 30] }) 
        }).addTo(map);
        let idx = 0;
        setInterval(() => {
            idx = (idx + 1) % path.length;
            marker.setLatLng(path[idx]);
        }, 1800);
    }

    // “ö–∞–±–∞–Ω–±–∞–π –±–æ–π—ã–º–µ–Ω –∞–≤—Ç–æ–±—É—Å
    runBus([[51.143, 71.405], [51.138, 71.420], [51.133, 71.435], [51.128, 71.450], [51.123, 71.465]], 'üöå');
    // –¢“±—Ä–∞–Ω –±–æ–π—ã–º–µ–Ω –∞–≤—Ç–æ–±—É—Å
    runBus([[51.150, 71.410], [51.145, 71.425], [51.140, 71.440], [51.135, 71.455]], 'üöê');

</script>
</body>
</html>

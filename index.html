<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AGEUL - Astana Clean Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        body, html { margin: 0; padding: 0; height: 100%; background: #0b0d11; overflow: hidden; }
        #map { height: 100vh; width: 100%; }
        
        /* –ë–∞—Ä–ª—ã“õ –ª–æ–≥–æ—Ç–∏–ø—Ç–µ—Ä –º–µ–Ω –∞–≤—Ç–æ—Ä–ª—ã“õ “õ“±“õ—ã“õ –±–µ–ª–≥—ñ–ª–µ—Ä—ñ–Ω ”©—à—ñ—Ä—É */
        .leaflet-control-attribution, .leaflet-control-zoom, .ymaps-2-1-79-copyright__wrap { 
            display: none !important; 
        }

        /* –ê–≤—Ç–æ–±—É—Å –±–µ–ª–≥—ñ–ª–µ—Ä—ñ (2GIS —Å—Ç–∏–ª—ñ) */
        .bus-label {
            background: #007aff; color: white; border: 2px solid white;
            border-radius: 12px; padding: 2px 8px; font-weight: bold;
            font-size: 12px; white-space: nowrap; box-shadow: 0 0 8px rgba(0,122,255,0.6);
        }

        /* –°–µ—Ä–≥–µ–∫ –∫–∞–º–µ—Ä–∞–ª–∞—Ä—ã */
        .sergek-dot {
            background: #ff3b30; border: 1px solid white; border-radius: 50%;
            box-shadow: 0 0 6px #ff3b30;
        }

        /* –ê“õ–ø–∞—Ä–∞—Ç—Ç—ã“õ –ø–∞–Ω–µ–ª—å */
        .ui-panel {
            position: absolute; top: 20px; left: 20px; z-index: 1000;
            background: rgba(15, 23, 42, 0.9); padding: 15px; border-radius: 10px;
            border: 1px solid #38bdf8; color: white; font-family: sans-serif;
        }
    </style>
</head>
<body>

<div class="ui-panel">
    <h3 style="margin:0; color:#38bdf8;">AGEUL: Smart Astana</h3>
    <p style="font-size:12px; margin:5px 0;">–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: <span style="color:#22c55e;">–ñ–∞—Å—ã–ª –∂–æ–ª–∞“õ—Ç–∞—Ä</span></p>
</div>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    // –ö–∞—Ä—Ç–∞–Ω—ã –ª–æ–≥–æ—Ç–∏–ø—Å—ñ–∑ –∂“Ø–∫—Ç–µ—É
    const map = L.map('map', { 
        zoomControl: false, 
        attributionControl: false 
    }).setView([51.135, 71.435], 13);

    // “ö–∞—Ä–∞“£“ì—ã —Å—Ç–∏–ª—å (–ê—Ä—Ç—ã“õ –∂–∞–∑—É—ã –∂–æ“õ)
    L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png').addTo(map);

    // –°–µ—Ä–≥–µ–∫—Ç—ñ “õ–∞–ª–∞ –±–æ–π—ã–Ω—à–∞ —à–∞—à—ã—Ä–∞—Ç—É (–°–µ–Ω –∂—ñ–±–µ—Ä–≥–µ–Ω —Å–∫—Ä–∏–Ω—à–æ—Ç—Ç–∞“ì—ã–¥–∞–π)
    for (let i = 0; i < 150; i++) {
        let lat = 51.1 + (Math.random() * 0.08);
        let lng = 71.38 + (Math.random() * 0.12);
        L.marker([lat, lng], {
            icon: L.divIcon({ className: 'sergek-dot', iconSize: [7, 7] })
        }).addTo(map);
    }

    // –ú–∞—Ä—à—Ä—É—Ç—Ç–∞—Ä–¥—ã —Å–∞–ª—É —Ñ—É–Ω–∫—Ü–∏—è—Å—ã (–ñ–∞—Å—ã–ª –ø–æ–ª–æ—Å–∞–º–µ–Ω –∂“Ø—Ä—É)
    function createRoute(coords, busNum, color = '#22c55e') {
        // –ñ–∞—Å—ã–ª –∂–æ–ª —Å—ã–∑—ã“ì—ã
        L.polyline(coords, { color: color, weight: 4, opacity: 0.8 }).addTo(map);

        // –ê–≤—Ç–æ–±—É—Å –º–∞—Ä–∫–µ—Ä—ñ
        const busIcon = L.divIcon({ 
            className: 'bus-label', 
            html: 'üöå ' + busNum,
            iconSize: [50, 25]
        });
        const marker = L.marker(coords[0], { icon: busIcon }).addTo(map);

        let step = 0;
        setInterval(() => {
            step = (step + 1) % coords.length;
            marker.setLatLng(coords[step]);
        }, 3000); // –ë–∞—è—É “õ–æ–∑“ì–∞–ª—ã—Å
    }

    // 1. –ú–∞—Ä—à—Ä—É—Ç 56 (–¢“±—Ä–∞–Ω –±–æ–π—ã–º–µ–Ω –∂–∞—Å—ã–ª –∂–æ–ª–º–µ–Ω)
    createRoute([
        [51.145, 71.405], [51.142, 71.415], [51.138, 71.425], [51.135, 71.435]
    ], '56');

    // 2. –ú–∞—Ä—à—Ä—É—Ç 15A (“ö–∞–±–∞–Ω–±–∞–π –±–∞—Ç—ã—Ä –±–æ–π—ã–º–µ–Ω)
    createRoute([
        [51.125, 71.430], [51.128, 71.440], [51.130, 71.450], [51.132, 71.460]
    ], '15A');

    // 3. –ú–∞—Ä—à—Ä—É—Ç 10 (–ú”ô“£–≥—ñ–ª—ñ–∫ –ï–ª –±–æ–π—ã–º–µ–Ω)
    createRoute([
        [51.115, 71.420], [51.112, 71.435], [51.108, 71.450], [51.105, 71.465]
    ], '10');

</script>
</body>
</html>

<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <title>AGEUL - Astana Interactive Map</title>
    <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU" type="text/javascript"></script>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; font-family: sans-serif; }
        #map { width: 100%; height: 100vh; }

        /* Төменгі панель (Сен жіберген скриншоттағыдай) */
        #bottom-panel {
            position: absolute; bottom: -400px; left: 0; width: 100%;
            background: white; border-top-left-radius: 20px; border-top-right-radius: 20px;
            z-index: 2000; transition: bottom 0.4s ease;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.3);
            padding: 20px; box-sizing: border-box;
        }
        #bottom-panel.active { bottom: 0; }

        .panel-handle { width: 40px; height: 5px; background: #ccc; margin: 0 auto 15px; border-radius: 10px; }
        .location-title { font-size: 20px; font-weight: bold; margin-bottom: 5px; }
        .location-desc { color: #666; font-size: 14px; margin-bottom: 15px; }
        
        .photo-container { width: 100%; height: 180px; background: #eee; border-radius: 12px; overflow: hidden; }
        .photo-container img { width: 100%; height: 100%; object-fit: cover; }

        .close-btn { position: absolute; right: 20px; top: 20px; font-size: 24px; cursor: pointer; color: #999; }
    </style>
</head>
<body>

<div id="bottom-panel">
    <div class="panel-handle"></div>
    <div class="close-btn" onclick="closePanel()">×</div>
    <div class="location-title" id="p-title">Dropped pin</div>
    <div class="location-desc" id="p-desc">Near Esil District, Astana</div>
    
    <div class="photo-container">
        <img id="p-img" src="https://lh5.googleusercontent.com/p/AF1QipN3-v_YvCgYq0m_B0_p9Z0R0e0_0_0" alt="Street View">
    </div>
</div>

<div id="map"></div>

<script type="text/javascript">
    ymaps.ready(init);
    var myMap;

    function init() {
        myMap = new ymaps.Map("map", {
            center: [51.128, 71.430],
            zoom: 14,
            controls: []
        });

        // Картаның кез келген жерін басқанда (мышкамен)
        myMap.events.add('click', function (e) {
            var coords = e.get('coords');
            showInfo("Таңдалған нүкте", "Координаттар: " + coords[0].toFixed(4) + ", " + coords[1].toFixed(4), "https://avatars.mds.yandex.net/get-altay/1922501/2a0000016da88656a9e1451f251c6a7e027d/orig");
        });

        // Сергектің нүктелерін қосу
        for (var i = 0; i < 50; i++) {
            var lat = 51.11 + (Math.random() * 0.04);
            var lng = 71.40 + (Math.random() * 0.06);
            
            var placemark = new ymaps.Placemark([lat, lng], {
                title: "Сергек №" + (1000 + i),
                desc: "Астана қ., Достық көшесі маңы"
            }, {
                preset: 'islands#redCircleDotIcon',
                iconColor: '#ff0000'
            });

            // Нүктені басқанда панель шығады
            placemark.events.add('click', function (e) {
                var target = e.get('target');
                showInfo(target.properties.get('title'), target.properties.get('desc'), "https://images.unsplash.com/photo-1596438415017-098555027581?auto=format&fit=crop&w=800&q=80");
                e.stopPropagation(); // Картаның клигімен араласпау үшін
            });

            myMap.geoObjects.add(placemark);
        }
    }

    function showInfo(title, desc, img) {
        document.getElementById('p-title').innerText = title;
        document.getElementById('p-desc').innerText = desc;
        document.getElementById('p-img').src = img;
        document.getElementById('bottom-panel').classList.add('active');
    }

    function closePanel() {
        document.getElementById('bottom-panel').classList.remove('active');
    }
</script>
</body>
</html>

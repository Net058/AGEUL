<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartCity Astana - Monitoring System</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <style>
        body, html { margin: 0; padding: 0; height: 100%; background: #111; overflow: hidden; font-family: 'Segoe UI', sans-serif; }
        #map { height: 100vh; width: 100%; background: #111; }
        
        /* –Ø–Ω–¥–µ–∫—Å –∂–∞–∑—É—ã–Ω –∂”ô–Ω–µ –∞—Ä—Ç—ã“õ –ª–æ–≥–æ—Ç–∏–ø—Ç–µ—Ä–¥—ñ ”©—à—ñ—Ä—É */
        .leaflet-control-attribution { display: none !important; }

        /* –ñ–æ–±–∞ –ø–∞–Ω–µ–ª—ñ (–°–µ–Ω—ñ“£ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã“£–¥–∞“ì—ã–¥–∞–π) */
        .info-card {
            position: absolute; top: 20px; left: 20px; z-index: 1000;
            background: rgba(15, 23, 42, 0.95); padding: 18px; border-radius: 12px;
            border: 1px solid #38bdf8; width: 260px; color: white;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); backdrop-filter: blur(10px);
        }

        /* –°–µ—Ä–≥–µ–∫ - –ù–∞“õ—Ç—ã “õ—ã–∑—ã–ª –Ω“Ø–∫—Ç–µ–ª–µ—Ä */
        .sergek-node {
            background: #ff0000; border: 1.5px solid #fff; border-radius: 50%;
            box-shadow: 0 0 8px rgba(255,0,0,0.9);
        }

        /* –ê—è–ª–¥–∞–º–∞ - –ö”©–∫ –Ω“Ø–∫—Ç–µ–ª–µ—Ä */
        .bus-stop {
            background: #007aff; border: 1px solid #fff; border-radius: 50%;
            box-shadow: 0 0 6px rgba(0,122,255,0.8);
        }

        /* –ê–≤—Ç–æ–±—É—Å - 2GIS —Å—Ç–∏–ª—ñ–Ω–¥–µ–≥—ñ –∫”©–∫ –±–∞“ì—ã—Ç—Ç–∞—É—ã—à */
        .bus-marker {
            font-size: 26px; transition: all 1.5s linear;
            filter: drop-shadow(0 0 5px #007aff);
        }
    </style>
</head>
<body>

<div class="info-card">
    <h2 style="margin:0; font-size: 18px; color:#38bdf8;">SmartCity: –ê—Å—Ç–∞–Ω–∞</h2>
    <div style="margin-top:10px; font-size: 13px;">
        <p>–°–∏—Å—Ç–µ–º–∞: <span style="color:#22c55e; font-weight:bold;">ONLINE</span></p>
        <p>–ö–∞–º–µ—Ä—ã Sergek: <span style="color:#ff4444;">112 –∞–∫—Ç–∏–≤–Ω—ã</span></p>
        <p>–ú–∞—Ä—à—Ä—É—Ç: <span style="color:#38bdf8;">Bus 15A (–ê–∫—Ç–∏–≤–µ–Ω)</span></p>
        <p>–ü—Ä–æ–µ–∫—Ç: <b>AGEUL</b></p>
    </div>
</div>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    // 1. –ö–∞—Ä—Ç–∞–Ω—ã –ê—Å—Ç–∞–Ω–∞“ì–∞ –±–∞–ø—Ç–∞—É
    const map = L.map('map', { zoomControl: false, attributionControl: false }).setView([51.135, 71.430], 14);

    // 2. –Ø–Ω–¥–µ–∫—Å –¥–µ–≥–µ–Ω –∂–∞–∑—É—ã –∂–æ“õ, —Ç–∞–∑–∞ “õ–∞—Ä–∞“£“ì—ã –∫–∞—Ä—Ç–∞ (CartoDB Dark Matter)
    L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png').addTo(map);

    // 3. –ñ–æ–ª –±–æ–π—ã–Ω–∞ 100 –°–µ—Ä–≥–µ–∫ —Ç—ñ–∑—É —Ñ—É–Ω–∫—Ü–∏—è—Å—ã
    function drawSergekLine(start, end, count) {
        for (let i = 0; i < count; i++) {
            let lat = start[0] + (end[0] - start[0]) * (i / count);
            let lng = start[1] + (end[1] - start[1]) * (i / count);
            L.marker([lat, lng], {
                icon: L.divIcon({ className: 'sergek-node', iconSize: [8, 8] })
            }).addTo(map);
        }
    }

    // –ù–µ–≥—ñ–∑–≥—ñ –¥–∞“£“ì—ã–ª–¥–∞—Ä“ì–∞ 100+ –∫–∞–º–µ—Ä–∞:
    drawSergekLine([51.128, 71.425], [51.100, 71.500], 35); // –ú”ô“£–≥—ñ–ª—ñ–∫ –ï–ª
    drawSergekLine([51.145, 71.405], [51.115, 71.470], 35); // “ö–∞–±–∞–Ω–±–∞–π –ë–∞—Ç—ã—Ä
    drawSergekLine([51.155, 71.415], [51.135, 71.460], 25); // –¢“±—Ä–∞–Ω
    drawSergekLine([51.175, 71.430], [51.145, 71.440], 20); // –†–µ—Å–ø—É–±–ª–∏–∫–∞/–°–∞—Ä—ã–∞—Ä“õ–∞

    // 4. 2GIS —Å—Ç–∏–ª—ñ–Ω–¥–µ–≥—ñ 15A –ú–∞—Ä—à—Ä—É—Ç—ã (–ö”©–∫ —Å—ã–∑—ã“õ)
    const route15A = [
        [51.120, 71.430], [51.130, 71.430], [51.135, 71.425], 
        [51.145, 71.425], [51.150, 71.435], [51.155, 71.450]
    ];
    L.polyline(route15A, { color: '#007aff', weight: 6, opacity: 0.8 }).addTo(map);

    // –ú–∞—Ä—à—Ä—É—Ç –±–æ–π—ã–Ω–¥–∞“ì—ã –∞—è–ª–¥–∞–º–∞–ª–∞—Ä
    route15A.forEach(coord => {
        L.marker(coord, { icon: L.divIcon({ className: 'bus-stop', iconSize: [9, 9] }) }).addTo(map);
    });

    // 5. “ö–æ–∑“ì–∞–ª—ã–ø –∂“Ø—Ä–≥–µ–Ω –∞–≤—Ç–æ–±—É—Å
    const busMarker = L.marker(route15A[0], { 
        icon: L.divIcon({ html: 'üöå', className: 'bus-marker', iconSize: [30, 30] }) 
    }).addTo(map);

    let step = 0;
    setInterval(() => {
        step = (step + 1) % route15A.length;
        busMarker.setLatLng(route15A[step]);
    }, 2000);

</script>
</body>
</html>

<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <title>AGEUL - Astana Transport Monitoring</title>
    <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU" type="text/javascript"></script>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; }
        #map { width: 100%; height: 100vh; }

        /* AGEUL интерфейсі */
        .ui-panel {
            position: absolute; top: 15px; left: 15px; z-index: 1000;
            background: rgba(13, 17, 23, 0.9); padding: 15px; border-radius: 12px;
            border: 2px solid #38bdf8; color: white; width: 260px; font-family: 'Segoe UI', sans-serif;
            box-shadow: 0 4px 20px rgba(0,0,0,0.6);
        }
        .status { color: #22c55e; font-weight: bold; }
    </style>
</head>
<body>

<div class="ui-panel">
    <h3 style="margin:0; color: #38bdf8;">SmartCity: Астана</h3>
    <div style="margin-top: 10px; font-size: 13px;">
        <p>Жүйе: <span class="status">ONLINE</span></p>
        <p>Объектілер: <b>400+ Сергектің нүктелері</b></p>
        <p>Көлік: <b>Bus 56 & 15A (2GIS стилі)</b></p>
        <p style="font-size: 11px; color: #94a3b8;">Интеграция: Яндекс.Карты + AGEUL AI</p>
    </div>
</div>

<div id="map"></div>

<script type="text/javascript">
    ymaps.ready(init);

    function init() {
        // Картаны инициализациялау (барлық батырмалар мен значоктармен)
        var myMap = new ymaps.Map("map", {
            center: [51.128, 71.430], // Астана сол жағалау орталығы
            zoom: 13,
            controls: ['trafficControl', 'typeSelector', 'fullscreenControl', 'zoomControl']
        });

        // 1. СЕРГЕКТЕРДІҢ ҚЫЗЫЛ НҮКТЕЛЕРІ (Сенің скриншотыңдағыдай)
        for (var i = 0; i < 300; i++) {
            var lat = 51.08 + (Math.random() * 0.12);
            var lng = 71.35 + (Math.random() * 0.18);
            var sergek = new ymaps.Placemark([lat, lng], {
                hintContent: 'Сергек камерасы'
            }, {
                preset: 'islands#redCircleDotIcon',
                iconColor: '#ff0000',
                iconScale: 0.8
            });
            myMap.geoObjects.add(sergek);
        }

        // 2. ҰЗЫН ЖӘНЕ НАҚТЫ МАРШРУТТАР (Жолдың қисықтарымен)

        // МАРШРУТ 56 (Скриншот бойынша: Тұран - Сығанақ - Мәңгілік Ел)
        var path56 = [
            [51.147, 71.405], [51.143, 71.418], [51.139, 71.428], // Тұран бойы
            [51.135, 71.432], [51.125, 71.434], [51.120, 71.438], // Сығанаққа бұрылыс
            [51.118, 71.445], [51.115, 71.460], [51.110, 71.475]  // Мәңгілік Ел
        ];

        var line56 = new ymaps.Polyline(path56, {}, {
            strokeColor: "#007aff", strokeWidth: 6, strokeOpacity: 0.8
        });
        myMap.geoObjects.add(line56);

        var bus56 = new ymaps.Placemark(path56[0], { iconContent: '56' }, {
            preset: 'islands#blueStretchyIcon'
        });
        myMap.geoObjects.add(bus56);

        // МАРШРУТ 15A (Оң жағалау - Сол жағалау байланысы)
        var path15A = [
            [51.165, 71.425], [51.155, 71.430], [51.145, 71.435], // Сарыарқа көпірі
            [51.135, 71.440], [51.125, 71.445], [51.115, 71.455]
        ];

        var line15A = new ymaps.Polyline(path15A, {}, {
            strokeColor: "#ff9500", strokeWidth: 6, strokeOpacity: 0.7
        });
        myMap.geoObjects.add(line15A);

        var bus15A = new ymaps.Placemark(path15A[0], { iconContent: '15A' }, {
            preset: 'islands#orangeStretchyIcon'
        });
        myMap.geoObjects.add(bus15A);

        // АВТОБУСТАРДЫ БАЯУ ЖӘНЕ НАҚТЫ ЖЫЛЖЫТУ
        function moveBus(marker, coords, speed) {
            var step = 0;
            setInterval(function() {
                step = (step + 1) % coords.length;
                marker.geometry.setCoordinates(coords[step]);
            }, speed);
        }

        moveBus(bus56, path56, 3500);  // 56-шы автобус
        moveBus(bus15A, path15A, 4500); // 15A-шы автобус
    }
</script>
</body>
</html>

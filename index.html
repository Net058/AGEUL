<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AGEUL - Astana Smart City Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        body, html { margin: 0; padding: 0; height: 100%; background: #0b0d11; font-family: 'Segoe UI', sans-serif; }
        #map { height: 100vh; width: 100%; }
        
        .ui-panel {
            position: absolute; top: 20px; left: 20px; z-index: 1000;
            background: rgba(15, 23, 42, 0.95); padding: 15px; border-radius: 12px;
            border: 1px solid #38bdf8; width: 240px; color: white; pointer-events: none;
        }

        /* –°–µ—Ä–≥–µ–∫—Ç—ñ“£ “õ—ã–∑—ã–ª –Ω“Ø–∫—Ç–µ–ª–µ—Ä—ñ */
        .sergek-dot { background: #ff4444; border: 1.5px solid white; border-radius: 50%; box-shadow: 0 0 10px #ff4444; }

        /* –ö”©–∫ –∞—è–ª–¥–∞–º–∞–ª–∞—Ä */
        .stop-dot { background: #38bdf8; border: 1px solid white; border-radius: 50%; box-shadow: 0 0 8px #38bdf8; }

        /* –ê–≤—Ç–æ–±—É—Å –±–µ–ª–≥—ñ—Å—ñ */
        .bus-marker { font-size: 26px; transition: all 1.5s linear; filter: drop-shadow(0 0 5px #38bdf8); }
    </style>
</head>
<body>

<div class="ui-panel">
    <h3 style="margin:0; color:#38bdf8;">SmartCity: –ê—Å—Ç–∞–Ω–∞</h3>
    <p style="font-size:12px; margin:5px 0;">–°–∏—Å—Ç–µ–º–∞: <span style="color:#22c55e;">ONLINE</span></p>
    <p style="font-size:12px; margin:5px 0;">–û–±—ä–µ–∫—Ç—ã: <b>–î–æ—Ä–æ–∂–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</b></p>
    <p style="font-size:11px; color:#94a3b8; margin-top:10px;">–ê–≤—Ç–æ–±—É—Å—ã –∏ –∫–∞–º–µ—Ä—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å –¥–æ—Ä–æ–∂–Ω–æ–π —Å–µ—Ç—å—é.</p>
</div>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    const map = L.map('map', { zoomControl: false }).setView([51.135, 71.430], 14);

    L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png').addTo(map);

    // --- –ñ–û–õ–î–ê–†–î–´“¢ –ë–û–ô–´–ù–î–ê“í–´ –ö–ê–ú–ï–†–ê–õ–ê–† (–°–ï–†–ì–ï–ö) ---
    const roadsSergek = [
        // “ö–∞–±–∞–Ω–±–∞–π –±–∞—Ç—ã—Ä –¥–∞“£“ì—ã–ª—ã
        [51.138, 71.415], [51.134, 71.428], [51.130, 71.440], [51.126, 71.455],
        // –ú”ô“£–≥—ñ–ª—ñ–∫ –ï–ª
        [51.125, 71.430], [51.121, 71.445], [51.117, 71.460], [51.113, 71.475],
        // –¢“±—Ä–∞–Ω –¥–∞“£“ì—ã–ª—ã
        [51.145, 71.405], [51.141, 71.420], [51.137, 71.435], [51.133, 71.450],
        // –°–∞—Ä—ã–∞—Ä“õ–∞ / –†–µ—Å–ø—É–±–ª–∏–∫–∞
        [51.160, 71.420], [51.155, 71.430], [51.150, 71.440], [51.165, 71.415],
        // –ö–µ—Ä—ñ –±–∞“ì—ã—Ç—Ç–∞—Ä –º–µ–Ω “õ–∏—ã–ª—ã—Å—Ç–∞—Ä
        [51.148, 71.410], [51.120, 71.410], [51.152, 71.445], [51.135, 71.465]
    ];

    roadsSergek.forEach(coord => {
        L.marker(coord, { icon: L.divIcon({ className: 'sergek-dot', iconSize: [11, 11] }) }).addTo(map);
    });

    // --- –ê–Ø–õ–î–ê–ú–ê–õ–ê–† (–ö”®–ö –ù“Æ–ö–¢–ï–õ–ï–†) ---
    const busStops = [
        [51.139, 71.412], [51.136, 71.425], [51.132, 71.438], [51.128, 71.452], // –õ–∏–Ω–∏—è 1
        [51.146, 71.408], [51.143, 71.422], [51.139, 71.436], [51.135, 71.453]  // –õ–∏–Ω–∏—è 2
    ];

    busStops.forEach(coord => {
        L.marker(coord, { icon: L.divIcon({ className: 'stop-dot', iconSize: [9, 9] }) }).addTo(map);
    });

    // --- –ê–í–¢–û–ë–£–°–¢–ê–†–î–´“¢ –ñ–û–õ–ú–ï–ù “ö–û–ó“í–ê–õ–´–°–´ ---
    function startBus(route, emoji, time) {
        const icon = L.divIcon({ html: emoji, className: 'bus-marker', iconSize: [30, 30] });
        const marker = L.marker(route[0], { icon: icon }).addTo(map);
        let pos = 0;

        setInterval(() => {
            pos = (pos + 1) % route.length;
            marker.setLatLng(route[pos]);
        }, time);
    }

    // –ú–∞—Ä—à—Ä—É—Ç 1: “ö–∞–±–∞–Ω–±–∞–π –±–∞—Ç—ã—Ä –±–æ–π—ã–º–µ–Ω
    startBus([
        [51.139, 71.412], [51.136, 71.425], [51.132, 71.438], [51.128, 71.452],
        [51.132, 71.438], [51.136, 71.425] // –ö–µ—Ä—ñ “õ–∞–π—Ç—É
    ], 'üöå', 2000);

    // –ú–∞—Ä—à—Ä—É—Ç 2: –¢“±—Ä–∞–Ω –±–æ–π—ã–º–µ–Ω
    startBus([
        [51.146, 71.408], [51.143, 71.422], [51.139, 71.436], [51.135, 71.453],
        [51.139, 71.436], [51.143, 71.422] // –ö–µ—Ä—ñ “õ–∞–π—Ç—É
    ], 'üöê', 2500);

</script>
</body>
</html>

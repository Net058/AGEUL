<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AGEUL - Astana Smart City Hackathon</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <style>
        body, html { margin: 0; padding: 0; height: 100%; background: #111; overflow: hidden; font-family: sans-serif; }
        #map { height: 100vh; width: 100%; background: #1a1a1a; }
        
        /* –Ø–Ω–¥–µ–∫—Å –Ω–µ–º–µ—Å–µ –±–∞—Å“õ–∞ –∂–∞–∑—É–ª–∞—Ä–¥—ã ”©—à—ñ—Ä—É */
        .leaflet-control-attribution { display: none !important; }

        /* 2GIS —Å—Ç–∏–ª—ñ–Ω–¥–µ–≥—ñ –ê–≤—Ç–æ–±—É—Å 56 –º–∞—Ä–∫–µ—Ä—ñ */
        .bus-56-badge {
            background: #007aff; color: white; border: 2px solid white;
            border-radius: 15px; padding: 2px 10px; font-weight: bold;
            font-size: 13px; display: flex; align-items: center; gap: 4px;
            box-shadow: 0 0 10px rgba(0,122,255,0.6);
        }

        /* –°–µ—Ä–≥–µ–∫ - –°–∫—Ä–∏–Ω—à–æ—Ç—Ç–∞“ì—ã–¥–∞–π –∫”©–∫—à—ñ–ª-—Å—É—ã“õ –Ω“Ø–∫—Ç–µ–ª–µ—Ä –Ω–µ–º–µ—Å–µ “õ—ã–∑—ã–ª (“õ–∞–ª–∞—É—ã“£—à–∞) */
        /* –ú–µ–Ω —Å–∞“ì–∞–Ω –Ω–∞“õ—Ç—ã –∫”©—Ä—ñ–Ω–µ—Ç—ñ–Ω–¥–µ–π “õ—ã–∑—ã–ª-–∂–∞—Ä“õ—ã–ª –±–µ—Ä–¥—ñ–º */
        .sergek-dot {
            background: #ff3b30; border: 1px solid white; border-radius: 50%;
            box-shadow: 0 0 5px #ff3b30;
        }

        /* –ê—è–ª–¥–∞–º–∞ - –ê“õ –∫—ñ—à–∫–µ–Ω—Ç–∞–π –Ω“Ø–∫—Ç–µ–ª–µ—Ä */
        .stop-dot {
            background: #fff; border: 1px solid #007aff; border-radius: 50%;
        }

        /* –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–°–∫—Ä–∏–Ω—à–æ—Ç—Ç–∞“ì—ã–¥–∞–π) */
        .header-info {
            position: absolute; top: 20px; left: 20px; z-index: 1000;
            background: rgba(0, 0, 0, 0.85); padding: 15px; border-radius: 12px;
            border: 1px solid #444; color: white; width: 240px;
        }
    </style>
</head>
<body>

<div class="header-info">
    <h2 style="margin:0; font-size: 18px; color: #38bdf8;">SmartCity: Astana</h2>
    <p style="font-size: 12px; margin: 10px 0 0 0;">–ü—Ä–æ–µ–∫—Ç: <b>AGEUL</b></p>
    <p style="font-size: 12px; margin: 5px 0;">–û–±—ä–µ–∫—Ç—ã: <span style="color: #ff3b30;">400+ Sergek</span></p>
    <p style="font-size: 12px; margin: 5px 0;">–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç: <span style="color: #007aff;">Bus 56 (Active)</span></p>
</div>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    // 1. –ê—Å—Ç–∞–Ω–∞ –æ—Ä—Ç–∞–ª—ã“ì—ã –∂”ô–Ω–µ “õ–∞—Ä–∞“£“ì—ã —Å—Ç–∏–ª—å (–Ø–Ω–¥–µ–∫—Å –µ–º–µ—Å, –∫”ô—Å—ñ–±–∏ Dark Mode)
    const map = L.map('map', { zoomControl: false, attributionControl: false }).setView([51.135, 71.435], 13);
    
    L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png').addTo(map);

    // 2. 400 –ö–ê–ú–ï–†–ê–ù–´ –®–ê–®–´–†–ê–¢–£ (–°–∫—Ä–∏–Ω—à–æ—Ç—Ç–∞“ì—ã–¥–∞–π —Ç—ã“ì—ã–∑)
    function spawnSergek(lat, lng, area) {
        for (let i = 0; i < 100; i++) { // ”ò—Ä –∞—É–¥–∞–Ω“ì–∞ 100-–¥–µ–Ω
            let rLat = lat + (Math.random() - 0.5) * area;
            let rLng = lng + (Math.random() - 0.5) * area;
            L.marker([rLat, rLng], {
                icon: L.divIcon({ className: 'sergek-dot', iconSize: [8, 8] })
            }).addTo(map);
        }
    }
    // –ê—Å—Ç–∞–Ω–∞–Ω—ã“£ –Ω–µ–≥—ñ–∑–≥—ñ 4 –±–∞“ì—ã—Ç—ã–Ω–∞ 100-–¥–µ–Ω —Ç–∞—Å—Ç–∞—É (–ñ–∞–ª–ø—ã 400)
    spawnSergek(51.128, 71.430, 0.05); // –°–æ–ª –∂–∞“ì–∞–ª–∞—É
    spawnSergek(51.150, 71.420, 0.04); // –û“£ –∂–∞“ì–∞–ª–∞—É (–¢“±—Ä–∞–Ω/–°–∞—Ä—ã–∞—Ä“õ–∞)
    spawnSergek(51.160, 71.450, 0.05); // –ê–ª–º–∞—Ç—ã –∞—É–¥–∞–Ω—ã
    spawnSergek(51.110, 71.410, 0.04); // EXPO –º–∞“£—ã

    // 3. –ê–í–¢–û–ë–£–° 56 –ú–ê–†–®–†–£–¢–´ (2GIS-—Ç–µ–≥—ñ–¥–µ–π –∫”©–∫ —Å—ã–∑—ã“õ)
    const path56 = [
        [51.145, 71.405], [51.143, 71.415], [51.140, 71.425], 
        [51.135, 71.435], [51.130, 71.445], [51.125, 71.455], [51.120, 71.470]
    ];
    L.polyline(path56, { color: '#007aff', weight: 6, opacity: 0.7 }).addTo(map);

    // –ê—è–ª–¥–∞–º–∞–ª–∞—Ä (–ê“õ –Ω“Ø–∫—Ç–µ–ª–µ—Ä)
    path56.forEach(coord => {
        L.marker(coord, { icon: L.divIcon({ className: 'stop-dot', iconSize: [8, 8] }) }).addTo(map);
    });

    // 4. –¢–Ü–†–Ü –ê–í–¢–û–ë–£–° "56" (–ö”©–∫ badge)
    const busIcon = L.divIcon({ 
        className: 'bus-56-badge', 
        html: '<span>üöå 56</span>', 
        iconSize: [70, 25],
        iconAnchor: [35, 12]
    });

    const busMarker = L.marker(path56[0], { icon: busIcon }).addTo(map);

    let step = 0;
    function moveBus() {
        step = (step + 1) % path56.length;
        busMarker.setLatLng(path56[step]);
    }
    // –ù–∞“õ—Ç—ã –±–∞–π—Å–∞–ª–¥—ã –∂—ã–ª–¥–∞–º–¥—ã“õ (”ô—Ä 2.5 —Å–µ–∫—É–Ω–¥ —Å–∞–π—ã–Ω)
    setInterval(moveBus, 2500);

</script>
</body>
</html>

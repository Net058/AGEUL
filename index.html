<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>SmartCity Astana - AGEUL Monitoring</title>
    <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU&apikey=ВАШ_API_КЛЮЧ" type="text/javascript"></script>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; font-family: 'Segoe UI', sans-serif; }
        #map { width: 100%; height: 100vh; }
        
        /* Панель управления в стиле AGEUL */
        .info-panel {
            position: absolute; top: 20px; left: 20px; z-index: 1000;
            background: rgba(13, 17, 23, 0.9); border: 1px solid #38bdf8;
            border-radius: 8px; padding: 15px; color: white; width: 250px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }
        .status-online { color: #22c55e; font-weight: bold; }
    </style>
</head>
<body>

<div class="info-panel">
    <h2 style="margin:0; font-size: 18px; color: #38bdf8;">SmartCity: Астана</h2>
    <hr style="border: 0.5px solid #333; margin: 10px 0;">
    <div style="font-size: 13px;">
        <p>Система: <span class="status-online">ONLINE</span></p>
        <p>Проект: <b>AGEUL</b></p>
        <p>Камеры Sergek: <span style="color: #fbbf24;">400 активны</span></p>
        <p>Трафик: <span style="color: #38bdf8;">Яндекс.Пробки</span></p>
    </div>
</div>

<div id="map"></div>

<script type="text/javascript">
    ymaps.ready(init);

    function init() {
        // Создаем карту Яндекса с центром в Астане
        var myMap = new ymaps.Map("map", {
            center: [51.13, 71.43], // Координаты Астаны
            zoom: 13,
            controls: ['trafficControl', 'zoomControl', 'typeSelector']
        });

        // Включаем слой пробок по умолчанию (как на navi.mnogotransporta.ru)
        var trafficControl = myMap.controls.get('trafficControl');
        trafficControl.showTraffic();

        // --- ДОБАВЛЯЕМ КАМЕРЫ СЕРГЕК (400 точек) ---
        // Имитация размещения камер по городу
        for (var i = 0; i < 400; i++) {
            var randomLat = 51.13 + (Math.random() - 0.5) * 0.15;
            var randomLng = 71.43 + (Math.random() - 0.5) * 0.2;
            
            var sergekPoint = new ymaps.Placemark([randomLat, randomLng], {
                hintContent: 'Камера Sergek №' + (i + 1),
                balloonContent: 'Объект активен. Нарушений не зафиксировано.'
            }, {
                preset: 'islands#dotIcon',
                iconColor: '#ff3b30' // Красный цвет как на карте из Facebook
            });
            myMap.geoObjects.add(sergekPoint);
        }

        // --- АВТОБУС 56 (2GIS STYLE) ---
        var busCoords = [
            [51.145, 71.405], [51.143, 71.415], [51.135, 71.435], [51.120, 71.470]
        ];
        
        var busMarker = new ymaps.Placemark(busCoords[0], {
            iconContent: '56'
        }, {
            preset: 'islands#bluePostIcon', // Синий значок
            draggable: false
        });
        
        myMap.geoObjects.add(busMarker);

        // Движение автобуса по маршруту
        var step = 0;
        setInterval(function() {
            step = (step + 1) % busCoords.length;
            busMarker.geometry.setCoordinates(busCoords[step]);
        }, 4000);
    }
</script>
</body>
</html>

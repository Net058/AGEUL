<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AGEUL - Astana Monitoring System</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <style>
        body, html { margin: 0; padding: 0; height: 100%; background: #000; font-family: 'Segoe UI', sans-serif; }
        #map { height: 100vh; width: 100%; }
        
        /* –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        .ui-panel {
            position: absolute; top: 15px; left: 15px; z-index: 1000;
            background: rgba(255, 255, 255, 0.95); padding: 15px; border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3); width: 220px; color: #333;
            border-left: 5px solid #ff0000;
        }

        /* –Ø–Ω–¥–µ–∫—Å —Å—Ç–∏–ª—ñ–Ω–¥–µ–≥—ñ –°–µ—Ä–≥–µ–∫ –±–µ–ª–≥—ñ–ª–µ—Ä—ñ (“ö—ã–∑—ã–ª) */
        .sergek-marker {
            background: #ff0000; border: 2px solid #fff; border-radius: 50%;
            box-shadow: 0 0 10px rgba(255,0,0,0.5);
        }

        /* –ê—è–ª–¥–∞–º–∞–ª–∞—Ä (–ö”©–∫) */
        .stop-marker {
            background: #0078ff; border: 1.5px solid #fff; border-radius: 2px;
            box-shadow: 0 0 5px rgba(0,120,255,0.5);
        }

        /* –ê–≤—Ç–æ–±—É—Å –∏–∫–æ–Ω–∫–∞—Å—ã */
        .bus-icon { font-size: 24px; transition: all 1s linear; filter: drop-shadow(0 0 3px #000); }
    </style>
</head>
<body>

<div class="ui-panel">
    <h3 style="margin:0; font-size: 16px; color: #000;">SmartCity Astana AI</h3>
    <p style="margin:5px 0; font-size:12px;"><b>–°–µ—Ä–≥–µ–∫:</b> <span style="color:red;">100+ –Ω“Ø–∫—Ç–µ</span></p>
    <p style="margin:5px 0; font-size:12px;"><b>–°—Ç–∞—Ç—É—Å:</b> <span style="color:green;">–ñ“Ø–π–µ “õ–æ—Å—É–ª—ã</span></p>
    <p style="margin:5px 0; font-size:12px;"><b>–ü—Ä–æ–µ–∫—Ç:</b> AGEUL</p>
</div>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
    // 1. –ö–∞—Ä—Ç–∞–Ω—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è–ª–∞—É (–Ø–Ω–¥–µ–∫—Å —Å—Ç–∏–ª—ñ–Ω–¥–µ–≥—ñ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–ª–∞—Ä)
    const map = L.map('map', { zoomControl: false }).setView([51.130, 71.430], 13);

    // 2. –Ø–ù–î–ï–ö–° –ö–ê–†–¢–ê “ö–ê–ë–ê–¢–´ (Tile)
    L.tileLayer('https://core-renderer-tiles.maps.yandex.net/tiles?l=map&v=21.01.19-0&x={x}&y={y}&z={z}&scale=1&lang=ru_RU', {
        attribution: '¬© Yandex'
    }).addTo(map);

    // –§—É–Ω–∫—Ü–∏—è: –ñ–æ–ª–¥—ã“£ –±–æ–π—ã–Ω–∞ –Ω“Ø–∫—Ç–µ–ª–µ—Ä–¥—ñ –∞–≤—Ç–æ–º–∞—Ç—Ç—ã “õ–æ—Å—É
    function addMarkersOnRoad(start, end, count, className) {
        for (let i = 0; i < count; i++) {
            let lat = start[0] + (end[0] - start[0]) * (i / count);
            let lng = start[1] + (end[1] - start[1]) * (i / count);
            // –ê–∑–¥–∞–ø "—à–∞—à—ã—Ä–∞—Ç—É" (–Ω–∞“õ—Ç—ã –∂–æ–ª –∂–∏–µ–≥—ñ –±–æ–ª—É “Ø—à—ñ–Ω)
            lat += (Math.random() - 0.5) * 0.0005;
            lng += (Math.random() - 0.5) * 0.0005;
            
            L.marker([lat, lng], {
                icon: L.divIcon({ className: className, iconSize: [10, 10] })
            }).addTo(map);
        }
    }

    // 3. –°–ï–†–ì–ï–ö–¢–ï–† (100 –®–¢–£–ö - –ù–µ–≥—ñ–∑–≥—ñ –¥–∞“£“ì—ã–ª–¥–∞—Ä –±–æ–π—ã–Ω–∞)
    // –ú”ô“£–≥—ñ–ª—ñ–∫ –ï–ª –±–æ–π—ã (30 –∫–∞–º–µ—Ä–∞)
    addMarkersOnRoad([51.125, 71.420], [51.100, 71.500], 30, 'sergek-marker');
    // “ö–∞–±–∞–Ω–±–∞–π –ë–∞—Ç—ã—Ä (30 –∫–∞–º–µ—Ä–∞)
    addMarkersOnRoad([51.145, 71.400], [51.120, 71.470], 30, 'sergek-marker');
    // –¢“±—Ä–∞–Ω –¥–∞“£“ì—ã–ª—ã (20 –∫–∞–º–µ—Ä–∞)
    addMarkersOnRoad([51.150, 71.405], [51.135, 71.460], 20, 'sergek-marker');
    // –°–∞—Ä—ã–∞—Ä“õ–∞/–†–µ—Å–ø—É–±–ª–∏–∫–∞ (20 –∫–∞–º–µ—Ä–∞)
    addMarkersOnRoad([51.170, 71.420], [51.140, 71.440], 20, 'sergek-marker');

    // 4. –ê–Ø–õ–î–ê–ú–ê–õ–ê–† (–ö”©–∫ –Ω“Ø–∫—Ç–µ–ª–µ—Ä - –ñ–æ–ª –±–æ–π—ã–Ω–¥–∞)
    const stops = [
        [51.138, 71.415], [51.135, 71.428], [51.131, 71.441], [51.128, 71.455],
        [51.145, 71.410], [51.142, 71.425], [51.138, 71.438], [51.134, 71.452]
    ];
    stops.forEach(s => {
        L.marker(s, { icon: L.divIcon({ className: 'stop-marker', iconSize: [8, 8] }) }).addTo(map);
    });

    // 5. –ê–í–¢–û–ë–£–°–¢–ê–† (–ù–∞“õ—Ç—ã –∂–æ–ª–º–µ–Ω –∂“Ø—Ä—É)
    function startBus(route, emoji) {
        const marker = L.marker(route[0], { 
            icon: L.divIcon({ html: emoji, className: 'bus-icon', iconSize: [30, 30] }) 
        }).addTo(map);
        
        let step = 0;
        setInterval(() => {
            step = (step + 1) % route.length;
            marker.setLatLng(route[step]);
        }, 1500);
    }

    // –ú–∞—Ä—à—Ä—É—Ç: “ö–∞–±–∞–Ω–±–∞–π –±–∞—Ç—ã—Ä –±–æ–π—ã–º–µ–Ω
    startBus([[51.145, 71.400], [51.142, 71.415], [51.138, 71.430], [51.134, 71.445], [51.130, 71.460]], 'üöå');
    // –ú–∞—Ä—à—Ä—É—Ç: –¢“±—Ä–∞–Ω –±–æ–π—ã–º–µ–Ω
    startBus([[51.150, 71.405], [51.145, 71.420], [51.140, 71.435], [51.135, 71.450]], 'üöê');

</script>
</body>
</html>
